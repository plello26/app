<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>{{ title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <h1>{{ title }}</h1>
  <p>L’app RentalPricer è online ✅ (template)</p>

  <h2>Upload CSV di prova</h2>
  <form id="uploadForm">
    <input type="file" id="file" name="file" accept=".csv" required>
    <button type="submit">Carica</button>
  </form>
  <pre id="result" style="background:#f4f4f4;padding:10px;"></pre>

  <hr>
  <ul>
    <li><a href="/platforms">Vai alle piattaforme</a></li>
    <li><a href="/docs">API Docs</a></li>
  </ul>

<script>
document.getElementById('uploadForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const fileInput = document.getElementById('file');
  if (!fileInput.files.length) return;
  const formData = new FormData();
  formData.append('file', fileInput.files[0]);
  const res = await fetch('/api/upload', { method: 'POST', body: formData });
  const json = await res.json();
  document.getElementById('result').textContent = JSON.stringify(json, null, 2);
});
</script>
</body>
</html>
